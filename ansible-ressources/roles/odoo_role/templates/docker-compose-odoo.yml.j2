services:
    {{ odoo_service_name }}:
        container_name: {{ odoo_service_name }}
        image: {{ odoo_image }}
        depends_on:
            - {{ odoo_db_name }}
        ports:
            - {{ odoo_ports }}:8069
        volumes:
            - {{ odoo_volumes_data }}:/var/lib/odoo
            - {{ odoo_volumes_config }}:/etc/odoo
            - {{ odoo_volumes_addons }}:/mnt/extra-addons
        environment:
            - USER={{ odoo_db_user }}
            - PASSWORD={{ odoo_db_password }}
            - HOST={{ odoo_db_host }}
        networks:
            - {{ odoo_networks }}

    {{ odoo_db_name }}:
        container_name: {{ odoo_db_name }}
        image: {{ odoo_db_image }}
        ports:
            - {{ odoo_db_port }}:5432
        volumes:
            - {{ odoo-db-data }}:/var/lib/postgresql/data/pgdata
        environment:
            - POSTGRES_DB=postgres
            - POSTGRES_PASSWORD={{ odoo_db_password }}
            - POSTGRES_USER={{ odoo_db_user }}
            - PGDATA=/var/lib/postgresql/data/pgdata
        networks:
            - {{ odoo_networks }}

volumes:
    {{ odoo_volumes_data }}:
    {{ odoo_db_data }}:
networks:
    {{ odoo_networks }}:
        driver: bridge
        name: {{ odoo_networks }}